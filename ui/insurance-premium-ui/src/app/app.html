<div class="app-container">
  <div class="card">
    <h1>Insurance Premium Calculator</h1>

    <form [formGroup]="premiumForm" (ngSubmit)="calculatePremium()" class="form-grid">
      <label>
        Age
        <input type="number" formControlName="age" name="age" />
      </label>

      <label>
        Coverage Amount
        <input type="number" formControlName="coverageAmount" name="coverageAmount" />
      </label>

      <label>
        Smoker
        <select formControlName="smoker" name="smoker">
          <option value="No">No</option>
          <option value="Yes">Yes</option>
        </select>
      </label>

      <label>
        State
        <select formControlName="state" name="state">
          <option value="PA">PA</option>
          <option value="NJ">NJ</option>
          <option value="NY">NY</option>
          <option value="DE">DE</option>
        </select>
      </label>

      <button type="submit" [disabled]="loading">
        {{ loading ? 'Calculating...' : 'Calculate Premium' }}
      </button>
    </form>

    <div class="result" *ngIf="premiumResult as value">
      <h2>Estimated Annual Premium</h2>
      <div class="premium-amount">{{ value | currency : 'USD' : 'symbol' : '1.0-0' }}</div>

      <h3>Premium Breakdown</h3>
      <div class="breakdown" *ngIf="premiumDetails">
        <div class="breakdown-item">
          <span class="label">Base Rate:</span>
          <span class="value">{{ premiumDetails.baseRate | percent : '1.2-2' }}</span>
        </div>
        <div class="breakdown-item">
          <span class="label">Age Factor:</span>
          <span class="value">{{ premiumDetails.ageFactor | number : '1.2-2' }}x</span>
        </div>
        <div class="breakdown-item">
          <span class="label">Smoker Surcharge:</span>
          <span class="value">{{ premiumDetails.smokerSurcharge | currency : 'USD' : 'symbol' : '1.2-2' }}</span>
        </div>
        <div class="breakdown-item">
          <span class="label">State Adjustment:</span>
          <span class="value">{{ premiumDetails.stateAdjustment | number : '1.2-2' }}x</span>
        </div>
        <div class="notes">
          <strong>Notes:</strong> {{ premiumDetails.ratingNotes }}
        </div>
      </div>
    </div>

    <div class="error" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>
  </div>
</div>